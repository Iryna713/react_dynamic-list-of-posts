(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(20)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(5),c=a.n(o),l=a(2),r=a(6),i=a(7),u=a(9),m=a(8),p=(a(15),a(16),a(1)),d=(a(17),function(e,t){return fetch("".concat("https://mate-api.herokuapp.com").concat(e),t).then((function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText));return e.json()})).then((function(e){return e.data}))}),h=function(e){return d("/comments?postId=".concat(e))},f=function(e){return t="/comments/".concat(e),d(t,{method:"DELETE"});var t},E=function(e){return function(e,t){return d(e,{method:"POST",headers:{"Content-type":"application/json;charser=UTF-8"},body:JSON.stringify(t)})}("/comments",e)},b=function(e){var t=e.onOpen,a=e.user,o=e.isPostChosen,c=e.selectedPost,l=Object(n.useState)([]),r=Object(p.a)(l,2),i=r[0],u=r[1];Object(n.useEffect)((function(){var e;0!==a?(e=a,d("/posts?userId=".concat(e))).then((function(e){u(e)})):d("/posts").then((function(e){u(e)}))}),[a,c,o]);return s.a.createElement("div",{className:"PostsList"},s.a.createElement("h2",null,"Posts:"),s.a.createElement("ul",{className:"PostsList__list"},i.map((function(e){return s.a.createElement("li",{className:"PostsList__item",key:e.id},s.a.createElement("div",null,s.a.createElement("b",null,"[User#",e.userId,"]:")),e.title,s.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){return a=e.id,void t(a);var a}},o&&c===e.id?"Close":"Open"))}))))},v=a(3),_=(a(18),function(e){var t=e.addComment,a=Object(n.useState)(""),o=Object(p.a)(a,2),c=o[0],l=o[1],r=Object(n.useState)(""),i=Object(p.a)(r,2),u=i[0],m=i[1],d=Object(n.useState)(""),h=Object(p.a)(d,2),f=h[0],E=h[1],b=Object(n.useState)(!1),v=Object(p.a)(b,2),_=v[0],N=v[1];return s.a.createElement("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),c||u||f?(t({name:c,email:u,body:f}),l(""),m(""),E("")):N(!0)}},s.a.createElement("div",{className:"form-field"},s.a.createElement("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:c,onChange:function(e){l(e.target.value.trim())}})),s.a.createElement("div",{className:"form-field"},s.a.createElement("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:u,onChange:function(e){m(e.target.value.trim())}})),s.a.createElement("div",{className:"form-field"},s.a.createElement("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:f,onChange:function(e){E(e.target.value.trim())}})),s.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button"},"Add a comment"),_&&s.a.createElement("div",null,"Not valid input"))}),N=(a(19),function(e){var t=e.postId,a=Object(n.useState)({}),o=Object(p.a)(a,2),c=o[0],l=o[1],r=Object(n.useState)([]),i=Object(p.a)(r,2),u=i[0],m=i[1],b=Object(n.useState)(!0),N=Object(p.a)(b,2),O=N[0],C=N[1];Object(n.useEffect)((function(){(function(e){return d("/posts/".concat(e))})(t).then((function(e){return l(e)})),h(t).then((function(e){m(e)}))}),[t]);return s.a.createElement("div",{className:"PostDetails"},s.a.createElement("h2",null,"Post details:"),s.a.createElement("section",{className:"PostDetails__post"},s.a.createElement("p",null,c.body)),s.a.createElement("section",{className:"PostDetails__comments"},s.a.createElement("button",{type:"button",className:"button",onClick:function(){C(!O)}},!0===O?"Hide ":"Show ",u.length," ","comments"),O&&s.a.createElement("ul",{className:"PostDetails__list"},u.map((function(e){return s.a.createElement("li",{className:"PostDetails__list-item",key:e.id},s.a.createElement("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return a=e.id,void f(a).then((function(){h(t).then((function(e){m(e)}))}));var a}},"X"),s.a.createElement("p",null,e.body))})))),s.a.createElement("section",null,s.a.createElement("div",{className:"PostDetails__form-wrapper"},s.a.createElement(_,{addComment:function(e){E(Object(v.a)(Object(v.a)({},e),{},{postId:t})).then((function(){h(t).then((function(e){m(e)}))}))}}))))}),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={userId:0,postId:0,isPostChosen:!1},e.handleChoseUser=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(l.a)({},n,+s))},e.handleOpenPost=function(t){e.state.postId===t&&e.state.isPostChosen?e.setState({isPostChosen:!1}):e.setState({postId:t,isPostChosen:!0})},e}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App__header"},s.a.createElement("label",null,"Select a user: \xa0",s.a.createElement("select",{className:"App__user-selector",value:this.state.userId,name:"userId",onChange:this.handleChoseUser},s.a.createElement("option",{value:"0"},"All users"),s.a.createElement("option",{value:"1"},"Leanne Graham"),s.a.createElement("option",{value:"2"},"Ervin Howell"),s.a.createElement("option",{value:"3"},"Clementine Bauch"),s.a.createElement("option",{value:"4"},"Patricia Lebsack"),s.a.createElement("option",{value:"5"},"Chelsey Dietrich"),s.a.createElement("option",{value:"6"},"Mrs. Dennis Schulist"),s.a.createElement("option",{value:"7"},"Kurtis Weissnat"),s.a.createElement("option",{value:"8"},"Nicholas Runolfsdottir V"),s.a.createElement("option",{value:"9"},"Glenna Reichert"),s.a.createElement("option",{value:"10"},"Leanne Graham")))),s.a.createElement("main",{className:"App__main"},s.a.createElement("div",{className:"App__sidebar"},s.a.createElement(b,{onOpen:this.handleOpenPost,user:this.state.userId,isPostChosen:this.state.isPostChosen,selectedPost:this.state.postId})),s.a.createElement("div",{className:"App__content"},this.state.isPostChosen&&s.a.createElement(N,{postId:this.state.postId}))))}}]),a}(n.Component);c.a.render(s.a.createElement(O,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.71227ab5.chunk.js.map